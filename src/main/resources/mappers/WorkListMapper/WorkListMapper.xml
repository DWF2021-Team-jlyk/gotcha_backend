<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.gotcha.www.workList.dao.WorkListDAO">

	<!-- Control Lists -->
	<!-- select ListId -->
	<select id="selectListId" resultType="Integer">
		select list_seq.nextval
		from dual
	</select>
	<!-- select List -->
	<select id="selectList" parameterType="int"
		resultType="com.gotcha.www.workList.vo.ListVO">
		select * from gc_list
		where
		ws_id = #{ws_id}
	</select>

	<select id="selectCardId" resultType="Integer">
		select card_seq.nextval
		from dual
	</select>

	<select id="selectLastCardId" resultType="int">
		select max(card_id)
		from gc_card
	</select>
	<!-- select Card -->
	<!-- <resultMap type="map" id="CardList"> <result property="card_desc" column="card_desc" 
		jdbcType="CLOB" javaType="java.lang.String" /> </resultMap> -->

	<select id="selectCard" parameterType="String"
		resultType="com.gotcha.www.workList.vo.CardVO">

		select * from
		gc_card
		where
		ws_id = #{ws_id}

	</select>

	<!-- insert Card (list_id, ws_id, card_start_date, card_end_date 받아옴) -->
	<insert id="insertCard"
		parameterType="com.gotcha.www.workList.vo.CardVO"
		keyProperty="card_id" keyColumn="card_id">
		insert into gc_card
		(CARD_ID,
		CARD_NAME,
		LIST_ID,
		WS_ID,
		CARD_ISDONE,
		CARD_START_DATE,
		CARD_END_DATE,
		POSITION,
		CARD_DESC)
		values (#{card_id},
		#{card_name},
		#{list_id},
		#{ws_id},
		#{card_isdone,jdbcType=CHAR},
		#{card_start_date,jdbcType=VARCHAR},
		#{card_end_date,jdbcType=VARCHAR},
		#{position},
		#{card_desc,jdbcType=VARCHAR}
		)
	</insert>

	<!-- update Card (list_id, ws_id, card_start_date, card_end_date 받아옴) -->
	<update id="updateCard">
		update gc_card
		set card_name = #{card_name},
		card_desc
		= #{card_desc,jdbcType=VARCHAR},
		list_id = #{list_id},
		ws_id = #{ws_id},
		card_isdone = #{card_isdone},
		card_start_date =
		#{card_start_date,jdbcType=VARCHAR},
		card_end_date =
		#{card_end_date,jdbcType=VARCHAR},
		POSITION = #{position}
		where card_id
		= #{card_id}
	</update>

	<!-- delete Card -->
	<delete id="deleteCard" parameterType="Integer">
		delete from gc_card
		where
		card_id = #{card_id}
	</delete>

	<delete id="deleteCardAct" parameterType="Integer">
		delete from gc_card_act
		where
		card_id = #{card_id}
	</delete>


	<delete id="deleteCardMember" parameterType="Integer">
		delete from gc_card_mem
		where
		card_id = #{card_id}
	</delete>


	<delete id="deleteCardTodo" parameterType="Integer">
		delete from gc_card_todo
		where
		card_id = #{card_id}
	</delete>

	<delete id="deleteCardFile" parameterType="Integer">
		delete from gc_card_file
		where
		card_id = #{card_id}
	</delete>



	<select id="selectCardList" parameterType="Integer"
		resultType="com.gotcha.www.workList.vo.CardVO">
		select * from gc_card where list_id = #{card_id}
	</select>

	<select id="selectOneCard" parameterType="int"
		resultType="com.gotcha.www.workList.vo.CardVO">
		select *
		from GC_CARD
		where CARD_ID=#{card_id}
	</select>

</mapper>